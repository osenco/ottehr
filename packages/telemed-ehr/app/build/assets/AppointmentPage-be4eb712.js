import{j as e,ab as L,ac as H,ad as z,T as q,ae as B,a9 as A,af as v,ag as k,ah as j,ai as W,aj as je,r as i,ak as $,a5 as ae,a6 as se,a7 as re,a8 as oe,u as F,l as Ee,m as Pe,f as M,al as I,am as me,an as ue,ao as Ve,B as u,ap as D,p as De,aq as we,a as Te,ar as _,as as Ce,at as ye,au as le,av as Ue,aw as Se,ax as ie,ay as Re,az as de,aA as ce,aB as Ie,aC as Le,aD as _e,aE as Ae,aF as Me,aG as Oe,aH as $e,aI as He,aJ as ze,aK as qe,aL as Be,aM as We,aN as Fe,aO as Ge,aP as ne}from"./index-7823e3da.js";const Ke=({onClose:t,preferredLanguage:a,isOpen:r})=>{const o=a,n={fontWeight:"700",textTransform:"none",borderRadius:6,mb:2,ml:1};return e.jsxDEV(L,{open:r,onClose:t,fullWidth:!0,disableScrollLock:!0,sx:{".MuiPaper-root":{padding:1,width:"444px",maxWidth:"initial"}},children:[e.jsxDEV(H,{variant:"h4",color:"primary.dark",sx:{width:"100%"},children:"Patientâ€™s Preferred Language"},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/components/PreferredLanguagePopup.tsx",lineNumber:35,columnNumber:7},globalThis),e.jsxDEV(z,{children:e.jsxDEV(q,{children:[e.jsxDEV("strong",{children:o},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/components/PreferredLanguagePopup.tsx",lineNumber:40,columnNumber:11},globalThis)," is the preferred language for the patient. Please contact the language line if the patient needs an interpreter:",e.jsxDEV("br",{},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/components/PreferredLanguagePopup.tsx",lineNumber:42,columnNumber:11},globalThis),"(123) 456-7890.",e.jsxDEV("br",{},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/components/PreferredLanguagePopup.tsx",lineNumber:44,columnNumber:11},globalThis),"This number is always available in the bottom left corner of the screen."]},void 0,!0,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/components/PreferredLanguagePopup.tsx",lineNumber:39,columnNumber:9},globalThis)},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/components/PreferredLanguagePopup.tsx",lineNumber:38,columnNumber:7},globalThis),e.jsxDEV(B,{sx:{justifyContent:"flex-end",mr:3},children:e.jsxDEV(A,{onClick:t,color:"primary",variant:"contained",size:"medium",sx:n,children:"OK, Got it"},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/components/PreferredLanguagePopup.tsx",lineNumber:49,columnNumber:9},globalThis)},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/components/PreferredLanguagePopup.tsx",lineNumber:48,columnNumber:7},globalThis)]},void 0,!0,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/components/PreferredLanguagePopup.tsx",lineNumber:22,columnNumber:5},globalThis)},Je=({onClose:t,isOpen:a})=>{const r={fontWeight:"700",textTransform:"none",borderRadius:6,mb:2,ml:1};return e.jsxDEV(L,{open:a,onClose:t,fullWidth:!0,disableScrollLock:!0,sx:{".MuiPaper-root":{padding:1,width:"444px",maxWidth:"initial"}},children:[e.jsxDEV(H,{variant:"h4",color:"primary.dark",sx:{width:"100%"},children:"Patient requires a Hearing Impaired Relay Service (711)"},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/components/HearingRelayPopup.tsx",lineNumber:32,columnNumber:7},globalThis),e.jsxDEV(z,{children:e.jsxDEV(q,{children:"Patient requires a Hearing Impaired Relay Service (711). Patient number is (123) 456-7890."},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/components/HearingRelayPopup.tsx",lineNumber:36,columnNumber:9},globalThis)},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/components/HearingRelayPopup.tsx",lineNumber:35,columnNumber:7},globalThis),e.jsxDEV(B,{sx:{justifyContent:"flex-end",mr:3},children:e.jsxDEV(A,{onClick:t,color:"primary",variant:"contained",size:"medium",sx:r,children:"OK, Got it"},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/components/HearingRelayPopup.tsx",lineNumber:41,columnNumber:9},globalThis)},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/components/HearingRelayPopup.tsx",lineNumber:40,columnNumber:7},globalThis)]},void 0,!0,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/components/HearingRelayPopup.tsx",lineNumber:19,columnNumber:5},globalThis)};var G={},Qe=j;Object.defineProperty(G,"__esModule",{value:!0});var pe=G.default=void 0,Xe=Qe(v()),Ye=k();pe=G.default=(0,Xe.default)((0,Ye.jsx)("path",{d:"M12 9c-1.6 0-3.15.25-4.6.72v3.1c0 .39-.23.74-.56.9-.98.49-1.87 1.12-2.66 1.85-.18.18-.43.28-.7.28-.28 0-.53-.11-.71-.29L.29 13.08c-.18-.17-.29-.42-.29-.7 0-.28.11-.53.29-.71C3.34 8.78 7.46 7 12 7s8.66 1.78 11.71 4.67c.18.18.29.43.29.71 0 .28-.11.53-.29.71l-2.48 2.48c-.18.18-.43.29-.71.29-.27 0-.52-.11-.7-.28-.79-.74-1.69-1.36-2.67-1.85-.33-.16-.56-.5-.56-.9v-3.1C15.15 9.25 13.6 9 12 9"}),"CallEnd");var K={},Ze=j;Object.defineProperty(K,"__esModule",{value:!0});var fe=K.default=void 0,et=Ze(v()),tt=k();fe=K.default=(0,et.default)((0,tt.jsx)("path",{d:"M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3m5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72z"}),"Mic");var J={},at=j;Object.defineProperty(J,"__esModule",{value:!0});var ge=J.default=void 0,st=at(v()),rt=k();ge=J.default=(0,st.default)((0,rt.jsx)("path",{d:"M19 11h-1.7c0 .74-.16 1.43-.43 2.05l1.23 1.23c.56-.98.9-2.09.9-3.28m-4.02.17c0-.06.02-.11.02-.17V5c0-1.66-1.34-3-3-3S9 3.34 9 5v.18zM4.27 3 3 4.27l6.01 6.01V11c0 1.66 1.33 3 2.99 3 .22 0 .44-.03.65-.08l1.66 1.66c-.71.33-1.5.52-2.31.52-2.76 0-5.3-2.1-5.3-5.1H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c.91-.13 1.77-.45 2.54-.9L19.73 21 21 19.73z"}),"MicOff");var Q={},ot=j;Object.defineProperty(Q,"__esModule",{value:!0});var he=Q.default=void 0,lt=ot(v()),it=k();he=Q.default=(0,lt.default)((0,it.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"}),"Settings");var X={},nt=j;Object.defineProperty(X,"__esModule",{value:!0});var be=X.default=void 0,mt=nt(v()),ut=k();be=X.default=(0,mt.default)((0,ut.jsx)("path",{d:"M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11z"}),"Videocam");var Y={},dt=j;Object.defineProperty(Y,"__esModule",{value:!0});var xe=Y.default=void 0,ct=dt(v()),pt=k();xe=Y.default=(0,ct.default)((0,pt.jsx)("path",{d:"m21 6.5-4 4V7c0-.55-.45-1-1-1H9.82L21 17.18zM3.27 2 2 3.27 4.73 6H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.21 0 .39-.08.54-.18L19.73 21 21 19.73z"}),"VideocamOff");const ft=({onClose:t,open:a})=>{const r=W(),o=je(),[n,c]=i.useState([]),[x,g]=i.useState([]),[p,m]=i.useState(""),[h,w]=i.useState(""),N=i.useRef(null),E=i.useMemo(()=>{const s=new $.ConsoleLogger("preview");return new $.DefaultDeviceController(s)},[]),y=async()=>{p&&await(o==null?void 0:o.startVideoInput(p)),h&&await(o==null?void 0:o.startAudioInput(h)),t()};i.useEffect(()=>{var U;const s={audioInputsChanged:f=>{g(f)},videoInputsChanged:f=>{c(f)}};return(U=r.audioVideo)==null||U.addDeviceChangeObserver(s),(async()=>{var S,d,V,R;const f=(d=await((S=r.audioVideo)==null?void 0:S.listVideoInputDevices()))!=null?d:[],C=(R=await((V=r.audioVideo)==null?void 0:V.listAudioInputDevices()))!=null?R:[];c(f),g(C),f.length>0&&m(f[0].deviceId),C.length>0&&w(C[0].deviceId)})(),()=>{var f;(f=r.audioVideo)==null||f.removeDeviceChangeObserver(s)}},[r.audioVideo]);const P=i.useCallback(async s=>{E&&N.current&&(await E.startVideoInput(s),E.startVideoPreviewForVideoInput(N.current))},[E]),T=async s=>{const b=s.target.value;m(b),await P(b)},l=async s=>{const b=s.target.value;w(b),await(o==null?void 0:o.startAudioInput(b))};return i.useEffect(()=>{let s=!1;return a&&p&&setTimeout(()=>{s||P(p)},200),()=>{s=!0}},[a,p,P]),e.jsxDEV(L,{open:a,onClose:t,children:[e.jsxDEV(H,{children:"Call Settings"},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/CallSettings.tsx",lineNumber:120,columnNumber:7},globalThis),e.jsxDEV(z,{children:[e.jsxDEV("video",{ref:N,autoPlay:!0,muted:!0,playsInline:!0,style:{height:"100%",width:"100%"}},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/CallSettings.tsx",lineNumber:122,columnNumber:9},globalThis),e.jsxDEV(ae,{fullWidth:!0,margin:"normal",children:[e.jsxDEV(se,{children:"Camera"},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/CallSettings.tsx",lineNumber:133,columnNumber:11},globalThis),e.jsxDEV(re,{value:p,onChange:T,label:"Camera",children:n.map(s=>e.jsxDEV(oe,{value:s.deviceId,children:s.label},s.deviceId,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/CallSettings.tsx",lineNumber:136,columnNumber:15},globalThis))},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/CallSettings.tsx",lineNumber:134,columnNumber:11},globalThis)]},void 0,!0,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/CallSettings.tsx",lineNumber:132,columnNumber:9},globalThis),e.jsxDEV(ae,{fullWidth:!0,margin:"normal",children:[e.jsxDEV(se,{children:"Microphone"},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/CallSettings.tsx",lineNumber:144,columnNumber:11},globalThis),e.jsxDEV(re,{value:h,onChange:l,label:"Microphone",children:x.map(s=>e.jsxDEV(oe,{value:s.deviceId,children:s.label},s.deviceId,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/CallSettings.tsx",lineNumber:147,columnNumber:15},globalThis))},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/CallSettings.tsx",lineNumber:145,columnNumber:11},globalThis)]},void 0,!0,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/CallSettings.tsx",lineNumber:143,columnNumber:9},globalThis)]},void 0,!0,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/CallSettings.tsx",lineNumber:121,columnNumber:7},globalThis),e.jsxDEV(B,{sx:{alignItems:"center",justifyContent:"flex-end",padding:"16px 24px"},children:[e.jsxDEV(A,{onClick:t,sx:{marginRight:1},variant:"text",children:"Cancel"},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/CallSettings.tsx",lineNumber:155,columnNumber:9},globalThis),e.jsxDEV(A,{onClick:y,variant:"contained",children:"Save Changes"},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/CallSettings.tsx",lineNumber:158,columnNumber:9},globalThis)]},void 0,!0,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/CallSettings.tsx",lineNumber:154,columnNumber:7},globalThis)]},void 0,!0,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/CallSettings.tsx",lineNumber:119,columnNumber:5},globalThis)},gt=()=>{const t=F(),a=Ee(),{mutateAsync:r,isLoading:o}=Pe(),{encounter:n}=M(I,["encounter"]),{id:c}=me(),{toggleVideo:x,isVideoEnabled:g}=ue(),{muted:p,toggleMute:m}=Ve(),h=W(),[w,N]=i.useState(!1),E=()=>{N(!0)},y=()=>{N(!1)},P=async()=>{var l;h&&(await((l=h.meetingSession)==null?void 0:l.deviceController.destroy().catch(s=>console.error(s))),await h.leave().catch(s=>console.error(s))),_.setState({meetingData:null})},T=async()=>{a&&c&&(await r({apiClient:a,appointmentId:c,newStatus:Te.unsigned},{}),I.setState({encounter:{...n,status:"finished"}})),await P()};return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(u,{sx:{display:"flex",alignItems:"center",gap:2,py:1},children:[e.jsxDEV(D,{onClick:x,variant:g?void 0:"disabled",children:g?e.jsxDEV(be,{sx:{color:t.palette.primary.contrastText}},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/VideoControls.tsx",lineNumber:71,columnNumber:13},globalThis):e.jsxDEV(xe,{sx:{color:t.palette.primary.dark}},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/VideoControls.tsx",lineNumber:73,columnNumber:13},globalThis)},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/VideoControls.tsx",lineNumber:69,columnNumber:9},globalThis),e.jsxDEV(D,{onClick:m,variant:p?"disabled":void 0,children:p?e.jsxDEV(ge,{sx:{color:t.palette.primary.dark}},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/VideoControls.tsx",lineNumber:80,columnNumber:13},globalThis):e.jsxDEV(fe,{sx:{color:t.palette.primary.contrastText}},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/VideoControls.tsx",lineNumber:78,columnNumber:13},globalThis)},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/VideoControls.tsx",lineNumber:76,columnNumber:9},globalThis),e.jsxDEV(D,{onClick:E,children:e.jsxDEV(he,{sx:{color:t.palette.primary.contrastText}},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/VideoControls.tsx",lineNumber:84,columnNumber:11},globalThis)},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/VideoControls.tsx",lineNumber:83,columnNumber:9},globalThis),e.jsxDEV(De,{title:"Do you want to end video call with the patient?",response:T,actionButtons:{proceed:{text:"End video call",color:"error"},back:{text:"Cancel"}},children:l=>e.jsxDEV(D,{onClick:l,disabled:o,variant:"error",children:o?e.jsxDEV(we,{size:24,sx:{color:t.palette.primary.contrastText}},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/VideoControls.tsx",lineNumber:100,columnNumber:17},globalThis):e.jsxDEV(pe,{sx:{color:t.palette.primary.contrastText}},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/VideoControls.tsx",lineNumber:102,columnNumber:17},globalThis)},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/VideoControls.tsx",lineNumber:98,columnNumber:13},globalThis)},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/VideoControls.tsx",lineNumber:86,columnNumber:9},globalThis)]},void 0,!0,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/VideoControls.tsx",lineNumber:61,columnNumber:7},globalThis),e.jsxDEV(ft,{onClose:y,open:w},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/VideoControls.tsx",lineNumber:108,columnNumber:7},globalThis)]},void 0,!0,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/VideoControls.tsx",lineNumber:60,columnNumber:5},globalThis)},ht=()=>{var p;const t=F(),{attendeeIdToTileId:a}=Ce(),{isVideoEnabled:r}=ue(),{roster:o}=ye(),n=M(_,["meetingData"]),[c,x]=i.useState(null),g=i.useMemo(()=>Object.keys(o).filter(m=>{var h;return((h=n.meetingData)==null?void 0:h.Attendee).AttendeeId!==m}).map(m=>({...o[m],tileId:a[m]})),[o,(p=n.meetingData)==null?void 0:p.Attendee,a]);return i.useEffect(()=>{g.length?x(g[0]):x(null)},[g]),e.jsxDEV(u,{sx:{display:"flex",flexDirection:"column",flex:1,height:"100%"},children:e.jsxDEV(u,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:[e.jsxDEV(u,{sx:{display:"flex",padding:1,gap:1,height:"100%"},children:[e.jsxDEV(u,{sx:{color:"white",width:"100%",overflow:"hidden",display:"flex",gap:1},children:c&&e.jsxDEV(u,{sx:{height:"100%",overflow:"hidden",position:"relative",width:"100%",backgroundColor:t.palette.primary.dark,borderRadius:2},children:c.tileId&&e.jsxDEV(le,{tileId:c.tileId},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/VideoRoom.tsx",lineNumber:85,columnNumber:46},globalThis)},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/VideoRoom.tsx",lineNumber:75,columnNumber:15},globalThis)},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/VideoRoom.tsx",lineNumber:65,columnNumber:11},globalThis),e.jsxDEV(u,{sx:{color:"white",minWidth:"20%",display:"grid",gridAutoColumns:"1fr",rowGap:1,alignContent:"start"},children:[e.jsxDEV(u,{sx:{aspectRatio:"1/1",backgroundColor:t.palette.primary.dark,borderRadius:"8px",overflow:"hidden",position:"relative"},children:[r&&e.jsxDEV(Ue,{},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/VideoRoom.tsx",lineNumber:108,columnNumber:34},globalThis),e.jsxDEV(u,{sx:{position:"absolute",top:0,left:0,height:34,width:"100%",backgroundImage:"linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0))",pt:"10px",pl:"10px"},children:e.jsxDEV(q,{sx:{fontWeight:700,fontSize:"14px"},children:"You"},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/VideoRoom.tsx",lineNumber:121,columnNumber:17},globalThis)},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/VideoRoom.tsx",lineNumber:109,columnNumber:15},globalThis)]},void 0,!0,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/VideoRoom.tsx",lineNumber:99,columnNumber:13},globalThis),g.filter(m=>m.chimeAttendeeId!==(c==null?void 0:c.chimeAttendeeId)).map(m=>e.jsxDEV(u,{sx:{aspectRatio:"1/1",backgroundColor:t.palette.primary.dark,borderRadius:"8px",overflow:"hidden",position:"relative",cursor:m.tileId?"pointer":"auto"},children:m.tileId&&e.jsxDEV(le,{onClick:()=>{x(m)},tileId:m.tileId},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/VideoRoom.tsx",lineNumber:139,columnNumber:21},globalThis)},m.chimeAttendeeId,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/VideoRoom.tsx",lineNumber:127,columnNumber:17},globalThis))]},void 0,!0,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/VideoRoom.tsx",lineNumber:89,columnNumber:11},globalThis)]},void 0,!0,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/VideoRoom.tsx",lineNumber:64,columnNumber:9},globalThis),e.jsxDEV(u,{sx:{backgroundColor:t.palette.primary.dark,display:"flex",justifyContent:"end",px:1},children:e.jsxDEV(gt,{},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/VideoRoom.tsx",lineNumber:158,columnNumber:11},globalThis)},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/VideoRoom.tsx",lineNumber:150,columnNumber:9},globalThis)]},void 0,!0,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/VideoRoom.tsx",lineNumber:57,columnNumber:7},globalThis)},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/VideoRoom.tsx",lineNumber:49,columnNumber:5},globalThis)};var Z={},bt=j;Object.defineProperty(Z,"__esModule",{value:!0});var Ne=Z.default=void 0,xt=bt(v()),Nt=k();Ne=Z.default=(0,xt.default)((0,Nt.jsx)("path",{d:"M19 7h-8v6h8zm2-4H3c-1.1 0-2 .9-2 2v14c0 1.1.9 1.98 2 1.98h18c1.1 0 2-.88 2-1.98V5c0-1.1-.9-2-2-2m0 16.01H3V4.98h18z"}),"PictureInPicture");var ee={},vt=j;Object.defineProperty(ee,"__esModule",{value:!0});var ve=ee.default=void 0,kt=vt(v()),jt=k();ve=ee.default=(0,kt.default)((0,jt.jsx)("path",{fillRule:"evenodd",d:"M16 9V4h1c.55 0 1-.45 1-1s-.45-1-1-1H7c-.55 0-1 .45-1 1s.45 1 1 1h1v5c0 1.66-1.34 3-3 3v2h5.97v7l1 1 1-1v-7H19v-2c-1.66 0-3-1.34-3-3"}),"PushPin");var te={},Et=j;Object.defineProperty(te,"__esModule",{value:!0});var ke=te.default=void 0,Pt=Et(v()),Vt=k();ke=te.default=(0,Pt.default)((0,Vt.jsx)("path",{d:"M21 11V3h-8l3.29 3.29-10 10L3 13v8h8l-3.29-3.29 10-10z"}),"OpenInFull");const Dt=({children:t})=>{const[a,r]=i.useState("pip"),o=i.useRef(null);return console.log(window.innerHeight),a==="pip"?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(L,{open:!0,hideBackdrop:!0,disableEnforceFocus:!0,disableScrollLock:!0,style:{pointerEvents:"none"},PaperProps:{style:{pointerEvents:"auto"}},PaperComponent:n=>e.jsxDEV(Se,{nodeRef:o,handle:".handle",bounds:"parent",defaultPosition:{x:0,y:350+24-window.innerHeight/2},children:e.jsxDEV(ie,{ref:o,...n,sx:{borderRadius:2,height:"400px",width:"500px"}},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/VideoChatLayout.tsx",lineNumber:34,columnNumber:15},globalThis)},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/VideoChatLayout.tsx",lineNumber:28,columnNumber:13},globalThis),children:e.jsxDEV(O,{type:a,setType:r,children:t},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/VideoChatLayout.tsx",lineNumber:38,columnNumber:11},globalThis)},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/VideoChatLayout.tsx",lineNumber:20,columnNumber:9},globalThis),e.jsxDEV(u,{sx:{height:"424px"}},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/VideoChatLayout.tsx",lineNumber:42,columnNumber:9},globalThis)]},void 0,!0,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/VideoChatLayout.tsx",lineNumber:19,columnNumber:7},globalThis):a==="fullscreen"?e.jsxDEV(L,{fullScreen:!0,open:!0,children:[e.jsxDEV(u,{sx:{display:"flex",flex:1},children:e.jsxDEV(O,{type:a,setType:r,children:t},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/VideoChatLayout.tsx",lineNumber:56,columnNumber:11},globalThis)},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/VideoChatLayout.tsx",lineNumber:50,columnNumber:9},globalThis),e.jsxDEV(Re,{},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/VideoChatLayout.tsx",lineNumber:60,columnNumber:9},globalThis),e.jsxDEV(de,{},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/VideoChatLayout.tsx",lineNumber:61,columnNumber:9},globalThis)]},void 0,!0,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/VideoChatLayout.tsx",lineNumber:49,columnNumber:7},globalThis):e.jsxDEV(ce,{maxWidth:"sm",sx:{mt:3},children:e.jsxDEV(ie,{elevation:0,sx:{borderRadius:2},children:e.jsxDEV(O,{type:a,setType:r,children:e.jsxDEV(u,{sx:{height:"400px"},children:t},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/VideoChatLayout.tsx",lineNumber:70,columnNumber:11},globalThis)},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/VideoChatLayout.tsx",lineNumber:69,columnNumber:9},globalThis)},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/VideoChatLayout.tsx",lineNumber:68,columnNumber:7},globalThis)},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/VideoChatLayout.tsx",lineNumber:67,columnNumber:5},globalThis)},O=t=>{const{type:a,setType:r,children:o}=t,n=F();return e.jsxDEV(u,{sx:{backgroundColor:n.palette.primary.dark,color:"white",display:"flex",flexDirection:"column",flex:1},children:[e.jsxDEV(u,{sx:{p:1,display:"flex",gap:1,cursor:a==="pip"?"move":"default"},className:"handle",children:[e.jsxDEV(D,{size:"small",variant:a==="pip"?"disabled":void 0,onClick:()=>r("pip"),sx:{color:a==="pip"?n.palette.primary.dark:n.palette.primary.contrastText},children:e.jsxDEV(Ne,{fontSize:"small"},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/VideoChatLayout.tsx",lineNumber:106,columnNumber:11},globalThis)},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/VideoChatLayout.tsx",lineNumber:98,columnNumber:9},globalThis),e.jsxDEV(D,{size:"small",variant:a==="pinned"?"disabled":void 0,onClick:()=>r("pinned"),sx:{color:a==="pinned"?n.palette.primary.dark:n.palette.primary.contrastText},children:e.jsxDEV(ve,{fontSize:"small"},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/VideoChatLayout.tsx",lineNumber:116,columnNumber:11},globalThis)},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/VideoChatLayout.tsx",lineNumber:108,columnNumber:9},globalThis),e.jsxDEV(D,{size:"small",variant:a==="fullscreen"?"disabled":void 0,onClick:()=>r("fullscreen"),sx:{color:a==="fullscreen"?n.palette.primary.dark:n.palette.primary.contrastText},children:e.jsxDEV(ke,{fontSize:"small"},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/VideoChatLayout.tsx",lineNumber:126,columnNumber:11},globalThis)},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/VideoChatLayout.tsx",lineNumber:118,columnNumber:9},globalThis)]},void 0,!0,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/VideoChatLayout.tsx",lineNumber:97,columnNumber:7},globalThis),e.jsxDEV(u,{sx:{backgroundColor:"#1A093B",height:"100%"},children:o},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/VideoChatLayout.tsx",lineNumber:130,columnNumber:7},globalThis)]},void 0,!0,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/VideoChatLayout.tsx",lineNumber:88,columnNumber:5},globalThis)},wt=()=>{const t=M(_,["meetingData"]),a=W();return i.useEffect(()=>{let r=!1;return(async()=>{if(t.meetingData){const n=new $.MeetingSessionConfiguration(t.meetingData.Meeting,t.meetingData.Attendee),c={deviceLabels:Ie.AudioAndVideo};if(await a.join(n,c),r)return;await a.start()}})(),()=>{r=!0}},[a,t.meetingData]),e.jsxDEV(Dt,{children:e.jsxDEV(ht,{},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/VideoChatContainer.tsx",lineNumber:45,columnNumber:7},globalThis)},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/features/appointment/VideoChatContainer.tsx",lineNumber:44,columnNumber:5},globalThis)},Ct=()=>{const{id:t}=me(),{meetingData:a}=M(_,["meetingData"]);Le();const[r,o]=i.useState(!1),[n,c]=i.useState(!1),[x,g]=i.useState(!1),[p,m]=i.useState(!1),[h,w]=i.useState(void 0),N=p&&!x,E=n&&!r&&!N,y=()=>{o(!0)},P=()=>{g(!0)},{isFetching:T}=_e({appointmentId:t},l=>{var f,C,S;const s=l==null?void 0:l.find(d=>d.resourceType==="QuestionnaireResponse");I.setState({appointment:l==null?void 0:l.find(d=>d.resourceType==="Appointment"),patient:l==null?void 0:l.find(d=>d.resourceType==="Patient"),location:l==null?void 0:l.find(d=>d.resourceType==="Location"),encounter:l==null?void 0:l.find(d=>d.resourceType==="Encounter"),questionnaireResponse:s,patientPhotoUrls:(l==null?void 0:l.filter(d=>{var V,R;return d.resourceType==="DocumentReference"&&d.status==="current"&&((R=(V=d.type)==null?void 0:V.coding)==null?void 0:R[0].code)===Ge}).flatMap(d=>d.content.map(V=>V.attachment.url)).filter(Boolean))||[]});const b=(C=(f=ne("relay-phone",s))==null?void 0:f.answer.find(Boolean))==null?void 0:C.valueString;(b==null?void 0:b.toLowerCase())==="yes"&&c(!0);const U=(S=ne("preferred-language",s))==null?void 0:S.answer[0].valueString;w(U),U!=="English"&&m(!0)});return i.useEffect(()=>{I.setState({appointment:void 0,patient:void 0,location:void 0,encounter:{},questionnaireResponse:void 0,patientPhotoUrls:[],chartData:void 0,currentTab:"hpi"}),Ae.setState(Me),_.setState({meetingData:null}),Oe.setState($e)},[]),i.useEffect(()=>{I.setState({isAppointmentLoading:T})},[T]),e.jsxDEV(u,{sx:{display:"flex",flexDirection:"column",alignItems:"center",minHeight:"100vh"},children:[e.jsxDEV(He,{},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/pages/AppointmentPage.tsx",lineNumber:127,columnNumber:7},globalThis),e.jsxDEV(Ke,{isOpen:N,onClose:P,preferredLanguage:h},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/pages/AppointmentPage.tsx",lineNumber:129,columnNumber:7},globalThis),e.jsxDEV(Je,{isOpen:E,onClose:y},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/pages/AppointmentPage.tsx",lineNumber:135,columnNumber:7},globalThis),e.jsxDEV(u,{sx:{display:"flex",flexDirection:"column",alignItems:"center",flex:1,width:"100%"},children:[a&&e.jsxDEV(ze,{theme:qe,children:[e.jsxDEV(Be,{},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/pages/AppointmentPage.tsx",lineNumber:148,columnNumber:13},globalThis),e.jsxDEV(We,{children:e.jsxDEV(wt,{},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/pages/AppointmentPage.tsx",lineNumber:150,columnNumber:15},globalThis)},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/pages/AppointmentPage.tsx",lineNumber:149,columnNumber:13},globalThis)]},void 0,!0,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/pages/AppointmentPage.tsx",lineNumber:147,columnNumber:11},globalThis),e.jsxDEV(ce,{maxWidth:"xl",sx:{my:3},children:e.jsxDEV(Fe,{},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/pages/AppointmentPage.tsx",lineNumber:156,columnNumber:11},globalThis)},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/pages/AppointmentPage.tsx",lineNumber:155,columnNumber:9},globalThis)]},void 0,!0,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/pages/AppointmentPage.tsx",lineNumber:137,columnNumber:7},globalThis),e.jsxDEV(de,{},void 0,!1,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/pages/AppointmentPage.tsx",lineNumber:160,columnNumber:7},globalThis)]},void 0,!0,{fileName:"/Users/mauko/Projects/Edwin/otter/packages/telemed-ehr/app/src/telemed/pages/AppointmentPage.tsx",lineNumber:119,columnNumber:5},globalThis)};export{Ct as AppointmentPage};
